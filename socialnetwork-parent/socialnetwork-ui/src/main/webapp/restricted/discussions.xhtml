<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head></h:head>

<h:body>
    <h:outputStylesheet name="style.css" library="css"/>
    <ui:include src="/template/commonHeader.xhtml" />
    
    <p:panelGrid columns="2" styleClass="mainScreen"> 
    <p:column><ui:include src="/template/commonMenu.xhtml" /></p:column>
    <p:column styleClass="mainScreen">
    	<p:panel>
	        <p:dataTable id="discussions" var="discussion" value="#{discussionBean.allDiscussions}" paginator="true" rows="10"
	        	selectionMode="single" rowKey="#{discussion.id}" styleClass="discussions ui-corner-all">  
				<p:ajax event="rowSelect" listener="#{discussionBean.onRowSelect}"   
	                  	/>  
		        <p:column headerText="#{msg['discussiontab.discussions.subject.header']}">
		        	<h:outputText value="#{discussion.subject}"/>  
		        </p:column>  
		  
		        <p:column headerText="#{msg['discussiontab.discussions.createdby.header']}">  
		            <h:outputText value="#{discussion.createdBy.login} - #{discussion.createdBy.firstName} #{discussion.createdBy.lastName}"/>
		        </p:column>  
		  
		        <p:column headerText="#{msg['discussiontab.discussions.creationtime.header']}" >  
		            <h:outputText value="#{discussion.creationTime}">
		            	<f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
		            </h:outputText>
		        </p:column>  
		  
		        <p:column headerText="#{msg['discussiontab.discussions.updatedby.header']}">  
		            <h:outputText value="#{discussion.updatedBy.login} - #{discussion.updatedBy.firstName} #{discussion.updatedBy.lastName}"/>
		        </p:column>  
	
		        <p:column headerText="#{msg['discussiontab.discussions.updatetime.header']}">  
		            <h:outputText value="#{discussion.updateTime}">
		            	<f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
		            </h:outputText> 
		        </p:column>  
		    </p:dataTable>
		    <p:panel id="discussion" renderer="#{discussionBean.currentDiscussion ne null}">
		    <h:outputText value="#{discussionBean.currentDiscussion}"></h:outputText>
		    </p:panel>
		</p:panel>
	</p:column>
	</p:panelGrid>
</h:body>

</html>
